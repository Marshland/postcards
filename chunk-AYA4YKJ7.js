import{c as g}from"./chunk-UCXKB2AN.js";import{Aa as v,Fb as E,N as h,Ta as a,Ua as o,Za as r,aa as p,ca as u,db as n,fb as l,nb as c,pa as s}from"./chunk-OIFITK5Y.js";var x=(()=>{class d{#e;constructor(){this.#e=h(E),this.emailsResource=g.text(()=>"./assets/data/all-emails.csv"),this.emails=p(new Set),this.emailsToAdd=this.#e.allEmails,this.emailsWithGoodAverage=this.#e.emailsWithGoodAverage,this.emailsThatAreNotInContacts=c(()=>{let t=this.emails(),e=this.emailsToAdd();return!t.size||!e.size?new Set:e.difference(t)}),this.emailsWithGoodAverageThatAreNotInContacts=c(()=>{let t=this.emails(),e=this.emailsWithGoodAverage();return!t.size||!e.size?new Set:e.difference(t)}),u(()=>{let t=this.emailsResource.value();if(!t)return;let e=this.#t(t);this.emails.set(new Set(e))})}downloadEmailsToAdd(){let t=this.emailsThatAreNotInContacts(),e="";for(let m of t)e+=`${m}
`;let i=new Blob([e],{type:"text/csv"});this.#e.downloadFile(i,`emails-to-add-${this.#e.createDateStr()}.csv`)}downloadEmailsToAddWithGoodAverage(){let t=this.emailsWithGoodAverageThatAreNotInContacts(),e="";for(let m of t)e+=`${m}, `;e=e.slice(0,-2);let i=new Blob([e],{type:"text/txt"});this.#e.downloadFile(i,`emails-to-add-with-good-average-${this.#e.createDateStr()}.txt`)}#t(t){let e=t.split(`
`).map(i=>i.split(";")[0]);return e.shift(),e}static{this.\u0275fac=function(e){return new(e||d)}}static{this.\u0275cmp=v({type:d,selectors:[["app-unique-emails"]],decls:17,vars:5,consts:[[3,"click"]],template:function(e,i){e&1&&(a(0,"div"),n(1),o(),a(2,"div")(3,"p"),n(4),o(),a(5,"p"),n(6),o()(),a(7,"div")(8,"p"),n(9),o(),a(10,"p"),n(11),o()(),a(12,"div")(13,"button",0),r("click",function(){return i.downloadEmailsToAdd()}),n(14,"Download emails to add"),o(),a(15,"button",0),r("click",function(){return i.downloadEmailsToAddWithGoodAverage()}),n(16,"Download emails to add (good average)"),o()()),e&2&&(s(),l("total emails: ",i.emails().size),s(3),l("total emails to add: ",i.emailsToAdd().size),s(2),l("emails that are not in contacts: ",i.emailsThatAreNotInContacts().size),s(3),l("total emails with good average: ",i.emailsWithGoodAverage().size),s(2),l("emails with good average that are not in contacts: ",i.emailsWithGoodAverageThatAreNotInContacts().size))},styles:[`app-unique-emails{display:block}app-unique-emails button+button{margin-left:1rem}app-unique-emails div{margin-bottom:1rem}app-unique-emails p{margin:0}
`],encapsulation:2,changeDetection:0})}}return d})();export{x as UniqueEmailsComponent};
