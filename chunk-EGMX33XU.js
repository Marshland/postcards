import{d as N}from"./chunk-TN4OYXLI.js";import"./chunk-B2KYQ7DF.js";import{$a as p,Ab as Y,Ba as _,Eb as V,Fa as S,Ka as k,La as C,Ma as T,Na as M,Oa as y,Pa as v,Qa as b,Ra as o,S as g,Sa as n,Ta as D,Ua as E,Va as F,Wa as c,Z as x,_ as w,_a as s,ab as I,mb as z,ta as i}from"./chunk-WQUZ3S52.js";function A(r,l){r&1&&(o(0,"div",9),D(1,"i",10),o(2,"span"),s(3,"View Details"),n()())}function P(r,l){if(r&1){let t=E();o(0,"button",7),F("click",function(){let a=x(t).$implicit,d=c().$implicit,m=c();return w(m.navigateToStatistics(d,a))}),o(1,"h3"),s(2),n(),o(3,"span",8),s(4),n(),S(5,A,4,0,"div",9),n()}if(r&2){let t=l.$implicit,e=c().$implicit,a=c();T("clickable",a.getMonthTotal(e,t)>0),C("disabled",a.getMonthTotal(e,t)===0),k("aria-label",a.getMonthName(t)+" "+e+": "+a.getMonthTotal(e,t)+" postcards"),i(2),p(a.getMonthName(t)),i(2),p(a.getMonthTotal(e,t)),i(),M(a.getMonthTotal(e,t)>0?5:-1)}}function B(r,l){if(r&1&&(o(0,"div",2)(1,"div",3)(2,"h2"),s(3),n(),o(4,"span",4),s(5),n()(),o(6,"div",5),v(7,P,6,7,"button",6,y),n()()),r&2){let t=l.$implicit,e=c();i(3),p(t),i(2),I("Total: ",e.getYearTotal(t),""),i(2),b(e.getSortedMonths(t))}}var O=(()=>{class r{constructor(){this.#t=g(V),this.#e=g(N),this.yearlyStats=z(()=>{let t=this.#t.postcards(),e=new Map;for(let a in t){let d=parseInt(a),m=new Map;for(let h in t[a]){let $=parseInt(h),f=0;for(let u in t[a][h])for(let j in t[a][h][u])f+=t[a][h][u][j]?.length??0;m.set($,f)}e.set(d,m)}return e})}#t;#e;getMonthName(t){return new Date(2e3,t-1,1).toLocaleString("en-US",{month:"long"})}getSortedYears(){return Array.from(this.yearlyStats().keys()).sort((t,e)=>e-t)}getSortedMonths(t){let e=this.yearlyStats().get(t);return e?Array.from(e.keys()).sort((a,d)=>a-d):[]}getMonthTotal(t,e){return this.yearlyStats().get(t)?.get(e)??0}getYearTotal(t){let e=this.yearlyStats().get(t);return e?Array.from(e.values()).reduce((a,d)=>a+d,0):0}navigateToStatistics(t,e){this.#e.navigate(["/statistics"],{queryParams:{year:t,month:e}})}static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275cmp=_({type:r,selectors:[["dashboard"]],decls:4,vars:0,consts:[[1,"dashboard"],[1,"years-container"],[1,"year-card"],[1,"year-header"],[1,"year-total"],[1,"months-grid"],[1,"month-card",3,"clickable","disabled"],[1,"month-card",3,"click","disabled"],[1,"month-total"],[1,"view-details"],[1,"fas","fa-chart-pie"]],template:function(e,a){e&1&&(o(0,"div",0)(1,"div",1),v(2,B,9,2,"div",2,y),n()()),e&2&&(i(2),b(a.getSortedYears()))},dependencies:[Y],styles:[`:root{--card-shadow: 0 2px 4px var(--shadow-color);--card-shadow-hover: 0 4px 8px var(--shadow-color);--card-padding: 1.5rem;--card-gap: 2rem;--month-card-min-width: 200px;--month-card-padding: 1rem;--font-xl: 1.5rem;--font-lg: 1.1rem;--spacing-sm: .5rem}.dashboard{background:var(--background-color);color:var(--text-primary)}.dashboard .years-container{display:flex;flex-direction:column;gap:var(--card-gap)}.dashboard .year-card{background:var(--card-background);border-radius:8px;box-shadow:var(--card-shadow);padding:var(--card-padding)}.dashboard .year-card .year-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;border-bottom:1px solid var(--border-color);padding-bottom:var(--spacing-sm)}.dashboard .year-card .year-header h2{margin:0;color:var(--text-primary);font-size:var(--font-xl)}.dashboard .year-card .year-header .year-total{font-size:var(--font-lg);color:var(--text-secondary);font-weight:500}.dashboard .year-card .months-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(var(--month-card-min-width),1fr));gap:1rem}.dashboard .year-card .month-card{appearance:none;border:none;width:100%;background:var(--month-card-background);border-radius:6px;padding:var(--month-card-padding);text-align:center;position:relative;outline:none;font-family:inherit}.dashboard .year-card .month-card.clickable{cursor:pointer;transition:all .2s ease}.dashboard .year-card .month-card.clickable:hover,.dashboard .year-card .month-card.clickable:focus-visible{transform:translateY(-2px);box-shadow:var(--card-shadow-hover);background:var(--month-card-background-hover, rgba(255, 255, 255, .15))}.dashboard .year-card .month-card.clickable:hover .view-details,.dashboard .year-card .month-card.clickable:focus-visible .view-details{opacity:1}.dashboard .year-card .month-card.clickable:active{transform:translateY(0)}.dashboard .year-card .month-card:disabled{opacity:.5;cursor:not-allowed;pointer-events:none}.dashboard .year-card .month-card h3{margin:0 0 var(--spacing-sm) 0;color:var(--text-tertiary);font-size:var(--font-lg);font-weight:400}.dashboard .year-card .month-card .month-total{font-size:var(--font-xl);font-weight:600;color:var(--accent-color);display:block;margin-bottom:var(--spacing-sm)}.dashboard .year-card .month-card .view-details{opacity:0;transition:opacity .2s ease;font-size:.9rem;color:var(--text-secondary);display:flex;align-items:center;justify-content:center;gap:var(--spacing-sm)}.dashboard .year-card .month-card .view-details i{font-size:1rem}@media (max-width: 768px){.dashboard{padding:var(--month-card-padding)}.months-grid{--month-card-min-width: 150px}.view-details{opacity:1}}
`],encapsulation:2,changeDetection:0})}}return r})();export{O as DashboardComponent};
