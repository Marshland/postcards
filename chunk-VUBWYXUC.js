import{d as N}from"./chunk-7F5TGI7W.js";import"./chunk-HTPDR6PX.js";import"./chunk-UCXKB2AN.js";import{Aa as _,Fb as Y,Ja as E,Ka as S,La as k,Ma as y,N as g,Na as v,Oa as b,S as x,T as w,Ta as o,Ua as n,Va as C,Wa as T,Xa as M,Za as D,_a as c,cb as F,db as s,eb as p,fb as I,nb as z,pa as i}from"./chunk-OIFITK5Y.js";function P(r,m){r&1&&(o(0,"div",9),C(1,"i",10),o(2,"span"),s(3,"View Details"),n()())}function j(r,m){if(r&1){let t=T();o(0,"button",7),D("click",function(){let e=x(t).$implicit,d=c().$implicit,l=c();return w(l.navigateToStatistics(d,e))}),o(1,"h3"),s(2),n(),o(3,"span",8),s(4),n(),S(5,P,4,0,"div",9),n()}if(r&2){let t=m.$implicit,a=c().$implicit,e=c();F("clickable",e.getMonthTotal(a,t)>0),M("disabled",e.getMonthTotal(a,t)===0),E("aria-label",e.getMonthName(t)+" "+a+": "+e.getMonthTotal(a,t)+" postcards"),i(2),p(e.getMonthName(t)),i(2),p(e.getMonthTotal(a,t)),i(),k(e.getMonthTotal(a,t)>0?5:-1)}}function A(r,m){if(r&1&&(o(0,"div",2)(1,"div",3)(2,"h2"),s(3),n(),o(4,"span",4),s(5),n()(),o(6,"div",5),v(7,j,6,7,"button",6,y),n()()),r&2){let t=m.$implicit,a=c();i(3),p(t),i(2),I("Total: ",a.getYearTotal(t)),i(2),b(a.getSortedMonths(t))}}var J=(()=>{class r{constructor(){this.#t=g(Y),this.#a=g(N),this.yearlyStats=z(()=>{let t=this.#t.postcards(),a=new Map;for(let e in t){let d=parseInt(e),l=new Map;for(let h in t[e]){let V=parseInt(h),f=0;for(let u in t[e][h])for(let $ in t[e][h][u])f+=t[e][h][u][$]?.length??0;l.set(V,f)}a.set(d,l)}return a})}#t;#a;getMonthName(t){return new Date(2e3,t-1,1).toLocaleString("en-US",{month:"long"})}getSortedYears(){return Array.from(this.yearlyStats().keys()).sort((t,a)=>a-t)}getSortedMonths(t){let a=this.yearlyStats().get(t);return a?Array.from(a.keys()).sort((e,d)=>e-d):[]}getMonthTotal(t,a){return this.yearlyStats().get(t)?.get(a)??0}getYearTotal(t){let a=this.yearlyStats().get(t);return a?Array.from(a.values()).reduce((e,d)=>e+d,0):0}navigateToStatistics(t,a){this.#a.navigate(["/statistics"],{queryParams:{year:t,month:a}})}static{this.\u0275fac=function(a){return new(a||r)}}static{this.\u0275cmp=_({type:r,selectors:[["dashboard"]],decls:4,vars:0,consts:[[1,"dashboard"],[1,"years-container"],[1,"year-card"],[1,"year-header"],[1,"year-total"],[1,"months-grid"],[1,"month-card",3,"clickable","disabled"],[1,"month-card",3,"click","disabled"],[1,"month-total"],[1,"view-details"],[1,"fas","fa-chart-pie"]],template:function(a,e){a&1&&(o(0,"div",0)(1,"div",1),v(2,A,9,2,"div",2,y),n()()),a&2&&(i(2),b(e.getSortedYears()))},styles:[`:root{--card-shadow: 0 2px 4px var(--shadow-color);--card-shadow-hover: 0 4px 8px var(--shadow-color);--card-padding: 1.5rem;--card-gap: 2rem;--month-card-min-width: 200px;--month-card-padding: 1rem;--font-xl: 1.5rem;--font-lg: 1.1rem;--spacing-sm: .5rem}.dashboard{background:var(--background-color);color:var(--text-primary)}.dashboard .years-container{display:flex;flex-direction:column;gap:var(--card-gap)}.dashboard .year-card{background:var(--card-background);border-radius:8px;box-shadow:var(--card-shadow);padding:var(--card-padding)}.dashboard .year-card .year-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;border-bottom:1px solid var(--border-color);padding-bottom:var(--spacing-sm)}.dashboard .year-card .year-header h2{margin:0;color:var(--text-primary);font-size:var(--font-xl)}.dashboard .year-card .year-header .year-total{font-size:var(--font-lg);color:var(--text-secondary);font-weight:500}.dashboard .year-card .months-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(var(--month-card-min-width),1fr));gap:1rem}.dashboard .year-card .month-card{appearance:none;border:none;width:100%;background:var(--month-card-background);border-radius:6px;padding:var(--month-card-padding);text-align:center;position:relative;outline:none;font-family:inherit}.dashboard .year-card .month-card.clickable{cursor:pointer;transition:all .2s ease}.dashboard .year-card .month-card.clickable:hover,.dashboard .year-card .month-card.clickable:focus-visible{transform:translateY(-2px);box-shadow:var(--card-shadow-hover);background:var(--month-card-background-hover, rgba(255, 255, 255, .15))}.dashboard .year-card .month-card.clickable:hover .view-details,.dashboard .year-card .month-card.clickable:focus-visible .view-details{opacity:1}.dashboard .year-card .month-card.clickable:active{transform:translateY(0)}.dashboard .year-card .month-card:disabled{opacity:.5;cursor:not-allowed;pointer-events:none}.dashboard .year-card .month-card h3{margin:0 0 var(--spacing-sm) 0;color:var(--text-tertiary);font-size:var(--font-lg);font-weight:400}.dashboard .year-card .month-card .month-total{font-size:var(--font-xl);font-weight:600;color:var(--accent-color);display:block;margin-bottom:var(--spacing-sm)}.dashboard .year-card .month-card .view-details{opacity:0;transition:opacity .2s ease;font-size:.9rem;color:var(--text-secondary);display:flex;align-items:center;justify-content:center;gap:var(--spacing-sm)}.dashboard .year-card .month-card .view-details i{font-size:1rem}@media(max-width:768px){.dashboard{padding:var(--month-card-padding)}.months-grid{--month-card-min-width: 150px}.view-details{opacity:1}}
`],encapsulation:2,changeDetection:0})}}return r})();export{J as DashboardComponent};
